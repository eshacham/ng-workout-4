<div [ngSwitch]="DisplayMode">
  <div *ngSwitchCase="displayMode.Workout">
      <div [hidden]="IsRunning">
          <ion-list lines="none">
              <ion-item *ngFor="let exerciseSet of exercise.sets"
                [ngClass]="getTopBottomMarginClass(exerciseSet)">
                <img src={{exerciseSet.imageUrl}} slot="start"/>
                <ion-label>
                    <h2 class="ion-text-wrap">{{exerciseSet.name}}</h2>
                    <app-exercise-variation class="ion-text-wrap"
                        #variationComponent
                        [exerciseSet]="exerciseSet" >
                    </app-exercise-variation>
                    <ion-button fill="clear" float-right *ngIf="isLastSet(exerciseSet)"
                        (click)="runExercise()" color="success">
                        <ion-icon slot="icon-only" name="play"></ion-icon>
                    </ion-button>
                </ion-label>
              </ion-item>
          </ion-list>
      </div>
      <div [hidden]="!IsRunning">
          <ion-grid>
              <ion-row class="ion-justify-content-around">
                  <ion-col *ngFor="let exerciseSet of exercise.sets">
                    <ion-label class="ion-text-wrap ion-text-center">
                        {{exerciseSet.name}}
                    </ion-label>
                  </ion-col>
              </ion-row>
              <ion-row class="ion-justify-content-around">
                  <ion-col *ngFor="let exerciseSet of exercise.sets" text-center>
                    <img src={{exerciseSet.imageUrl}} />
                  </ion-col>
              </ion-row>
              <ion-row class="ion-justify-content-around">
                  <ion-col *ngFor="let exerciseSet of exercise.sets" >
                      <app-exercise-variation [exerciseSet]="exerciseSet"
                        class="ion-text-wrap ion-text-center">
                      </app-exercise-variation>
                  </ion-col>
              </ion-row>
              <ion-row *ngFor="let exerciseSet of exercise.sets">
                  <ion-col *ngFor="let rep of exerciseSet.reps; let i = index" id="col-rep"
                          [ngClass]="getRunningExerciseSetRepCellClass(i)" >
                      <div *ngIf='rep.weight'>
                          <h4 class="ion-text-center">{{rep.weight}}<small>{{' ' + weightUnit[rep.weightUnit]}}</small></h4>
                      </div>
                      <div *ngIf='rep.times'>
                          <h4 class="ion-text-center">{{rep.times}}<small>{{' Times'}}</small>
                              <ion-icon *ngIf='isRepCompleted(i)' name="checkmark"></ion-icon>
                          </h4>
                      </div>
                      <div *ngIf='rep.seconds'>
                          <h4 class="ion-text-center">{{rep.seconds}}<small>{{' Seconds'}}</small>
                              <ion-icon *ngIf='isRepCompleted(i)' name="checkmark"></ion-icon>
                          </h4>
                      </div>
                      <h3 class="ion-text-center" *ngIf="isTimedRepRemaining(i)">{{timedRepRemaining}} Seconds
                      </h3>
                  </ion-col>
              </ion-row>
              <ion-row class="ion-justify-content-center">
                  <div *ngIf="isResting">
                      <ion-button size="large" class="et-button"
                          (click)="skipRest()">
                          Rest {{timedRestRemaining}} Seconds or Skip
                      </ion-button>
                  </div>
                  <div *ngIf="!isResting">
                      <ion-button fill="clear" color="success"
                          [disabled]="!isPrevRepAvailable" (click)="prevRep()">
                          <ion-icon slot="icon-only" name="arrow-dropleft"></ion-icon>
                      </ion-button>
                      <ion-button size="large" class="et-button"
                          (click)="nextRep(true)">
                          Done!
                      </ion-button>
                      <ion-button fill="clear" color="success"
                          (click)="nextRep(false)">
                          <ion-icon slot="icon-only" name="arrow-dropright"></ion-icon>
                      </ion-button>
                  </div>
              </ion-row>
          </ion-grid>
      </div>
  </div>
  <div *ngSwitchCase="displayMode.Edit">
      <ion-grid>
        <ion-row class="ion-justify-content-around">
              <ion-col *ngFor="let exerciseSet of exercise.sets; let i = index" no-padding>
                <ion-item>
                    <ion-input type="text" [(ngModel)]="exerciseSet.name" class="ion-text-center"
                        placeholder="Exercise Name"
                        >
                    </ion-input>
                </ion-item>
            </ion-col>
        </ion-row>
        <ion-row class="ion-justify-content-around">
            <ion-col *ngFor="let exerciseSet of exercise.sets; let i = index"
                no-padding col-with-image-and-button>
                <ion-item id="item-with-image-and-button">
                    <img src={{exerciseSet.imageUrl}}/>
                    <ion-button fill="clear" bottom color="success"
                        (click)="deleteExerciseSet(i)">
                        <ion-icon slot="icon-only" name="trash"></ion-icon>
                    </ion-button>
                </ion-item>
                <ion-button fill="clear" up color="success"
                    *ngIf="isNotLastInSet(exerciseSet)"
                    (click)="switchExerciseSets(i)">
                    <ion-icon slot="icon-only" name="repeat"></ion-icon>
                </ion-button>
            </ion-col>
        </ion-row>
        <ion-row>
            <ion-col *ngFor="let exerciseSet of exercise.sets; let i = index" no-padding>
                <app-exercise-variation class="ion-text-wrap ion-text-center"
                    [exerciseSet]="exerciseSet"
                    [inEditMode]="true">
                </app-exercise-variation>
            </ion-col>
        </ion-row>
        <ion-row class="ion-justify-content-center">
            <ion-button fill="clear" color="success"
                (click)="toggleOpen()">
                <ion-icon slot="icon-only" *ngIf="!IsOpen" name="arrow-dropdown"></ion-icon>
                <ion-icon slot="icon-only" *ngIf="IsOpen" name="arrow-dropup"></ion-icon>
            </ion-button>
        </ion-row>

        <ion-row *ngFor="let exerciseSet of OpenedExerciseSets"
            class="ion-justify-content-center ion-no-margin ion-padding-bottom">
            <ion-col *ngFor="let rep of exerciseSet.reps; let i = index"
                class="ion-no-padding nonActiveRep">
                    <div
                        (click)="presentPopover($event, rep)">
                        <h4 *ngIf='rep.weight' class="ion-text-center">
                            {{rep.weight}}
                            <small>{{' ' + weightUnit[rep.weightUnit]}}</small>
                        </h4>
                        <h4 *ngIf='rep.times' class="ion-text-center" >
                            {{rep.times}}
                            <small>{{' Times'}}</small>
                        </h4>
                        <h4 *ngIf='rep.seconds' class="ion-text-center" >
                            {{rep.seconds}}<small>{{' Seconds'}}</small>
                        </h4>
                        <h4 *ngIf='!rep.weight && !rep.times && !rep.seconds' class="ion-text-center">
                            ...
                        </h4>
                    </div>
                    <div class="bordered"
                        *ngIf="isLastSet(exerciseSet)" >
                        <ion-button fill="clear" size="small" narrow-padding color="success"
                            (click)="deleteRep(i)" [disabled]="isMinReps">
                            <ion-icon slot="icon-only" name="trash" narrow-padding></ion-icon>
                        </ion-button>
                        <ion-button fill="clear" size="small" narrow-padding color="success"
                            (click)="addRep(i)" [disabled]="isMaxReps">
                            <ion-icon slot="icon-only" name="add-circle" narrow-padding></ion-icon>
                        </ion-button>
                    </div>
            </ion-col>
        </ion-row>

        <ion-row class="ion-justify-content-center" *ngIf="IsOpen">
            <ion-col>
                <ion-list lines="none" class="noBottomMargin">
                    <h3 class="ion-text-center">
                        Set Rest: {{exercise.sets[0].restBetweenReps}} seconds
                    </h3>
                    <ion-item>
                        <ion-range [(ngModel)]="exercise.sets[0].restBetweenReps" color="success">
                            <ion-icon slot="start" size="small" name="repeat"></ion-icon>
                            <ion-icon slot="end" name="repeat"></ion-icon>
                        </ion-range>
                    </ion-item>
                    <h3 class="ion-text-center">
                        Exercise Rest: {{exercise.sets[0].restAfterExercise}} seconds
                    </h3>
                    <ion-item>
                        <ion-range [(ngModel)]="exercise.sets[0].restAfterExercise" color="success">
                            <ion-icon slot="start" size="small" name="body"></ion-icon>
                            <ion-icon slot="end" name="body"></ion-icon>
                        </ion-range>
                    </ion-item>
                </ion-list>
            </ion-col>
        </ion-row>

      </ion-grid>
  </div>
  <div *ngSwitchDefault>
      <ion-list lines="none">
          <ion-item *ngFor="let exerciseSet of exercise.sets">
            <img src={{exerciseSet.imageUrl}} slot="start"/>
            <ion-label>
                <h2 class="ion-text-wrap">{{exerciseSet.name}}</h2>
                <app-exercise-variation class="ion-text-wrap"
                    [exerciseSet]="exerciseSet">
                </app-exercise-variation>
            </ion-label>
          </ion-item>
      </ion-list>
  </div>
</div>
